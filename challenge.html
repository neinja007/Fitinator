<!--
  Copyright 2023 Anton Siligan.
  All rights reserved. This work is protected by copyright law.
  No part of this work may be reproduced, distributed, or transmitted
  in any form or by any means without the prior written permission
  of the copyright holder.
-->

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />

		<link rel="icon" type="image/x-icon" href="favicon.png" />
		<title>Fitinator</title>

		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
			crossorigin="anonymous"
		/>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
			crossorigin="anonymous"
		></script>
		<script src="https://kit.fontawesome.com/4518c1bac3.js" crossorigin="anonymous"></script>
		<script src="challenge.js"></script>
	</head>

	<body onload="on_load()">
		<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
			<div class="container-fluid">
				<a class="navbar-brand bg-light px-1 rounded" href="index.html"
					><img src="logo.png" alt="" height="50px" class="float-start"
				/></a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainnav">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="mainnav">
					<ul class="navbar-nav me-auto">
						<li class="nav-item">
							<a href="index.html" class="nav-link">Overview</a>
						</li>
						<li class="nav-item">
							<a href="challenge.html" class="nav-link active">Challenge</a>
						</li>
						<li class="nav-item">
							<a href="warmup.html" class="nav-link">Warm-Ups</a>
						</li>
						<li class="nav-item">
							<a href="stretching.html" class="nav-link">Stretching</a>
						</li>
						<li class="nav-item">
							<a href="spare.html" class="nav-link">Spare</a>
						</li>
						<li class="nav-item">
							<a href="merge.html" class="nav-link">Merge</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<div id="settings" class="container p-4 bg-light text-dark border border-dark border-2">
			<h1>Challenge <i class="fa-solid fa-person-running"></i></h1>
			<br />
			<p>Before you start, <i>please tell us what you're up to</i>:</p>
			<hr />
			<div class="row">
				<div class="col-sm-4"><i class="fa-solid fa-signature"></i> What's the <i>name</i> of the challenge?</div>
				<div class="col-sm-8">
					<input
						class="form-control"
						type="text"
						id="name"
						placeholder="e.g. 'Push Up Challenge', 'Pull Ups in Hell', 'Squat Avalanche'"
					/>
				</div>
			</div>
			<hr />
			<div class="row">
				<div class="col-sm-4">
					<i class="fa-solid fa-play"></i> What's up with the <i>participants</i> (max. 4)? <br />
					<i class="fa-solid fa-fire-flame-curved" style="color: red"></i> Hot tip: Pick very different and vibrant
					colours!<br /><br />
					Total Participants: <i class="fa-solid fa-person" id="preview_participant_1"></i
					><i class="fa-solid fa-person" id="preview_participant_2" hidden></i
					><i class="fa-solid fa-person" id="preview_participant_3" hidden></i
					><i class="fa-solid fa-person" id="preview_participant_4" hidden></i> (<b id="preview_participants">1</b>)
				</div>
				<div class="col-sm-8">
					<div class="row">
						<div class="col-sm-3">
							<input class="form-control my-1" type="text" placeholder="Participant 1 Name" id="participant_1_name" />
						</div>
						<div class="col-sm-1">
							<input
								type="color"
								class="form-control form-control-color my-1"
								id="participant_1_color"
								value="#FF0000"
							/>
						</div>
						<div class="col-sm-3">
							<button class="btn btn-outline-danger my-1" id="participant_1_remove" disabled>
								Disable Participant
							</button>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-3">
							<input
								class="form-control my-1"
								type="text"
								placeholder="Participant 2 Name"
								id="participant_2_name"
								disabled
							/>
						</div>
						<div class="col-sm-1">
							<input
								type="color"
								class="form-control form-control-color my-1"
								id="participant_2_color"
								value="#00FF00"
								disabled
							/>
						</div>
						<div class="col-sm-3">
							<button
								class="btn btn-outline-danger my-1"
								id="participant_2_remove"
								hidden
								onclick="toggle_participant('2', false)"
							>
								Disable Participant
							</button>
							<button
								class="btn btn-outline-success my-1"
								id="participant_2_add"
								onclick="toggle_participant('2', true)"
							>
								Enable Participant
							</button>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-3">
							<input
								class="form-control my-1"
								type="text"
								placeholder="Participant 3 Name"
								id="participant_3_name"
								disabled
							/>
						</div>
						<div class="col-sm-1">
							<input
								type="color"
								class="form-control form-control-color my-1"
								id="participant_3_color"
								value="#0000FF"
								disabled
							/>
						</div>
						<div class="col-sm-3">
							<button
								class="btn btn-outline-danger my-1"
								id="participant_3_remove"
								hidden
								onclick="toggle_participant('3', false)"
							>
								Disable Participant
							</button>
							<button
								class="btn btn-outline-success my-1"
								id="participant_3_add"
								onclick="toggle_participant('3', true)"
							>
								Enable Participant
							</button>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-3">
							<input
								class="form-control my-1"
								type="text"
								placeholder="Participant 4 Name"
								id="participant_4_name"
								disabled
							/>
						</div>
						<div class="col-sm-1">
							<input
								type="color"
								class="form-control form-control-color my-1"
								id="participant_4_color"
								value="#FFCC00"
								disabled
							/>
						</div>
						<div class="col-sm-3">
							<button
								class="btn btn-outline-danger my-1"
								id="participant_4_remove"
								hidden
								onclick="toggle_participant('4', false)"
							>
								Disable Participant
							</button>
							<button
								class="btn btn-outline-success my-1"
								id="participant_4_add"
								onclick="toggle_participant('4', true)"
							>
								Enable Participant
							</button>
						</div>
					</div>
				</div>
			</div>
			<hr />
			<div class="row">
				<div class="col-sm-4">
					<i class="fa-solid fa-flag-checkered"></i> What's the <i>repetition goal</i> you wanna reach?
				</div>
				<div class="col-sm-8">
					<input
						class="form-control"
						type="number"
						id="repetitions"
						placeholder="e.g. '100', '250', '23789687324194357954387'"
					/>
				</div>
			</div>
			<hr />
			<div class="row">
				<div class="col-sm-4"><i class="fa-regular fa-clock"></i> How much <i>time</i> do you have?</div>
				<div class="col-sm-2">
					hours:
					<input
						class="form-control"
						type="number"
						id="hours"
						onchange="update_time()"
						placeholder="e.g. '1', '2'"
						style="width: 150px"
						value="1"
						min="0"
						max="2"
					/>
				</div>
				<div class="col-sm-2">
					minutes:
					<input
						class="form-control"
						type="number"
						id="minutes"
						onchange="update_time()"
						placeholder="e.g. '20', '55'"
						style="width: 150px"
						value="0"
						min="0"
						max="59"
					/>
				</div>
				<div class="col-sm-2">
					seconds:
					<input
						class="form-control"
						type="number"
						id="seconds"
						onchange="update_time()"
						placeholder="e.g. '20', '55'"
						style="width: 150px"
						value="0"
						min="0"
						max="59"
					/>
				</div>
				<div class="col-sm-2">
					Total time: <br />
					<b id="preview_time">1h 0m 0s</b>
				</div>
			</div>
			<hr />
			<div class="row">
				<div class="col-sm-4">
					<i class="fa-solid fa-play"></i> Are you <i>ready</i>?! <b class="text-danger">Caution</b>: there's
					<b>no countdown</b>. Challenge starts instantly!
				</div>
				<div class="col-sm-8">
					<button class="btn btn-success" onclick="start()">Yes, I am!</button>
					<button class="btn btn-danger" disabled>No, I am not.</button>
				</div>
			</div>
		</div>
		<div id="challenge" class="container p-4 bg-light text-dark border border-dark border-2 fs-4" hidden>
			<h1 style="margin-left: auto; margin-right: auto; text-align: center">
				<span id="display_name"></span> [<span id="status">in progress...</span>]
			</h1>
			<br />
			<i class="fa-solid fa-stopwatch"></i> Time (<b id="display_remaining_time"></b> remaining)
			<div class="progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
				<div
					class="progress-bar bg-secondary progress-bar-striped progress-bar-animated"
					style="width: 0%"
					id="time_progress"
				>
					<b id="time_percentage"></b>
				</div>
			</div>

			<br />

			<i class="fa-solid fa-person-walking"></i> Repetitions (<b id="display_done_reps">0</b> out of
			<b id="display_total_reps"></b>)
			<div class="progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
				<div class="progress-bar bg-success" style="width: 0%" id="rep_progress"><b id="rep_percentage"></b></div>
			</div>

			<br />

			<p id="progressing">
				You are <b id="display_rep_advantage" class="text-success"></b> or
				<b id="display_time_advantage" class="text-success"></b> <span id="ahead">ahead</span
				><span id="behind">behind</span>!
				<br />
				Estimated rep count at this speed: <i id="not_shown_yet">shown after two minutes</i
				><span id="estimates" hidden
					><b id="estimated_reps"></b> (reps per minute: <span id="reps_per_minute"></span>, target:
					<span id="target_rpm"></span>)</span
				>
			</p>
			<p id="failure" hidden>
				<b class="text-danger">YOUR FAT ASS 🍑 JUST FAILED THE CHALLENGE! <b>BIG L</b></b>
			</p>
			<p id="success" hidden>
				<b class="text-success">EZ WIN! <b>BIG W</b> 🍆</b>
			</p>

			<div id="individual_rep_percentage">
				<i class="fa-solid fa-user"></i> Individual Repetition Percentage

				<div class="progress-stacked">
					<div
						class="progress"
						role="progressbar"
						aria-valuemin="0"
						aria-valuemax="100"
						style="width: 0%"
						id="participant_1_progress"
					>
						<div class="progress-bar" style="background-color: red" id="participant_1_progress_color">
							<b id="participant_1_individual_percentage"></b>
						</div>
					</div>

					<div
						class="progress"
						role="progressbar"
						aria-valuemin="0"
						aria-valuemax="100"
						style="width: 0%"
						id="participant_2_progress"
					>
						<div class="progress-bar" style="background-color: green" id="participant_2_progress_color">
							<b id="participant_2_individual_percentage"></b>
						</div>
					</div>

					<div
						class="progress"
						role="progressbar"
						aria-valuemin="0"
						aria-valuemax="100"
						style="width: 0%"
						id="participant_3_progress"
					>
						<div class="progress-bar" style="background-color: blue" id="participant_3_progress_color">
							<b id="participant_3_individual_percentage"></b>
						</div>
					</div>

					<div
						class="progress"
						role="progressbar"
						aria-valuemin="0"
						aria-valuemax="100"
						style="width: 0%"
						id="participant_4_progress"
					>
						<div class="progress-bar" style="background-color: blue" id="participant_4_progress_color">
							<b id="participant_4_individual_percentage"></b>
						</div>
					</div>
				</div>

				<i class="fa-solid fa-person" id="display_participant_1_color"></i> =
				<i id="display_participant_1_name"></i> (<span id="rep_count_participant_1">0</span>)
				<span name="participant_2_element">
					| <i class="fa-solid fa-person" id="display_participant_2_color"></i> =
					<i id="display_participant_2_name"></i> (<span id="rep_count_participant_2">0</span>)</span
				>
				<span name="participant_3_element">
					| <i class="fa-solid fa-person" id="display_participant_3_color"></i> =
					<i id="display_participant_3_name"></i> (<span id="rep_count_participant_3">0</span>)</span
				>
				<span name="participant_4_element">
					| <i class="fa-solid fa-person" id="display_participant_4_color"></i> =
					<i id="display_participant_4_name"></i> (<span id="rep_count_participant_4">0</span>)</span
				>

				<br />
			</div>
			<br />

			<div class="d-grid gap-2">
				<button class="btn btn-success" id="participant_1_rep_button" onclick="rep(1)">
					<b style="background-color: black; border-radius: 5px; padding: 3px"
						>+1 Rep (for '<span id="name_participant_1"></span>')</b
					>
				</button>
				<button class="btn btn-success" id="participant_2_rep_button" onclick="rep(2)">
					<b style="background-color: black; border-radius: 5px; padding: 3px"
						>+1 Rep (for '<span id="name_participant_2"></span>')</b
					>
				</button>
				<button class="btn btn-success" id="participant_3_rep_button" onclick="rep(3)">
					<b style="background-color: black; border-radius: 5px; padding: 3px"
						>+1 Rep (for '<span id="name_participant_3"></span>')</b
					>
				</button>
				<button class="btn btn-success" id="participant_4_rep_button" onclick="rep(4)">
					<b style="background-color: black; border-radius: 5px; padding: 3px"
						>+1 Rep (for '<span id="name_participant_4"></span>')</b
					>
				</button>
			</div>
		</div>
		<br />
		<br />
	</body>
</html>
